{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\boomers\\\\\\uC870\\uC218\\uC544\\\\graphQL\\\\yalco-inflearn-graphql-apollo\\\\4-1-react-before-apollo\\\\src\\\\components\\\\teams.js\",\n    _s3 = $RefreshSig$();\n\nimport \"./components.css\";\nimport { useState } from \"react\";\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\nconst GET_TEAMS = gql`\n  query GetTeams {\n    teams {\n      id\n      manager\n      members {\n        id\n        first_name\n        last_name\n        role\n      }\n    }\n  }\n`;\nconst GET_TEAM = gql`\n  query GetTeam($id: ID!) {\n    team(id: $id) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`;\nconst DELETE_TEAM = gql`\n  mutation DeleteTeam($id: ID!) {\n    deleteTeam(id: $id) {\n      id\n    }\n  }\n`;\nlet refetchTeams; // ...\n\nconst EDIT_TEAM = gql`\n  mutation EditTeam($id: ID!, $input: PostTeamInput!) {\n    editTeam(id: $id, input: $input) {\n      id\n      manager\n      office\n      extension_number\n      mascot\n      cleaning_duty\n      project\n    }\n  }\n`; // ...\n//   ...\n//   ...\n\nfunction Teams() {\n  _s3();\n\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  const [contentId, setContentId] = useState(0);\n  const [inputs, setInputs] = useState({\n    manager: \"\",\n    office: \"\",\n    extension_number: \"\",\n    mascot: \"\",\n    cleaning_duty: \"\",\n    project: \"\"\n  });\n  const [deleteTeam] = useMutation(DELETE_TEAM, {\n    onCompleted: deleteTeamCompleted\n  });\n\n  function execDeleteTeam() {\n    if (window.confirm(\"이 항목을 삭제하시겠습니까?\")) {\n      deleteTeam({\n        variables: {\n          id: contentId\n        }\n      });\n    }\n  }\n\n  function deleteTeamCompleted(data) {\n    console.log(data.deleteTeam);\n    alert(`${data.deleteTeam.id} 항목이 삭제되었습니다.`);\n    refetchTeams();\n    setContentId(0);\n  }\n\n  function execEditTeam() {\n    editTeam({\n      variables: {\n        id: contentId,\n        input: inputs\n      }\n    });\n  }\n\n  const [editTeam] = useMutation(EDIT_TEAM, {\n    onCompleted: editTeamCompleted\n  });\n\n  function editTeamCompleted(data) {\n    console.log(data.editTeam);\n    alert(`${data.editTeam.id} 항목이 수정되었습니다.`);\n    refetchTeams();\n  }\n\n  function AsideItems() {\n    _s();\n\n    const roleIcons = {\n      developer: \"💻\",\n      designer: \"🎨\",\n      planner: \"📝\"\n    };\n    const {\n      loading,\n      error,\n      data,\n      refetch\n    } = useQuery(GET_TEAMS);\n    refetchTeams = refetch;\n    if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }, this);\n    if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: \"Error :(\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: data.teams.map(({\n        id,\n        manager,\n        members\n      }) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"teamItemTitle\",\n            onClick: () => {\n              setContentId(id);\n            },\n            children: [\"Team \", id, \" : \", manager, \"'s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"teamMembers\",\n            children: members.map(({\n              id,\n              first_name,\n              last_name,\n              role\n            }) => {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [roleIcons[role], \" \", first_name, \" \", last_name]\n              }, id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n\n  _s(AsideItems, \"D1/SdZTYM540x1wj5x+NzEA5Uvk=\", false, function () {\n    return [useQuery];\n  });\n\n  function MainContents() {\n    _s2();\n\n    const {\n      loading,\n      error\n    } = useQuery(GET_TEAM, {\n      variables: {\n        id: contentId\n      },\n      onCompleted: data => {\n        if (contentId === 0) {\n          setInputs({\n            manager: \"\",\n            office: \"\",\n            extension_number: \"\",\n            mascot: \"\",\n            cleaning_duty: \"\",\n            project: \"\"\n          });\n        } else {\n          setInputs({\n            manager: data.team.manager,\n            office: data.team.office,\n            extension_number: data.team.extension_number,\n            mascot: data.team.mascot,\n            cleaning_duty: data.team.cleaning_duty,\n            project: data.team.project\n          });\n        }\n      }\n    });\n    if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }, this);\n    if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: \"Error :(\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 23\n    }, this);\n\n    function handleChange(e) {\n      const {\n        name,\n        value\n      } = e.target;\n      setInputs({ ...inputs,\n        [name]: value\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [contentId !== 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: contentId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Manager\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"manager\",\n                value: inputs.manager,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Office\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"office\",\n                value: inputs.office,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Extension Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"extension_number\",\n                value: inputs.extension_number,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Mascot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"mascot\",\n                value: inputs.mascot,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Cleaning Duty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"cleaning_duty\",\n                value: inputs.cleaning_duty,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: \"Project\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"project\",\n                value: inputs.project,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), contentId === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {},\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: execEditTeam,\n          children: \"Modify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: execDeleteTeam,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setContentId(0);\n          },\n          children: \"New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  }\n\n  _s2(MainContents, \"ojwgO38o7Pa+jiP/qhaLIDn8+Q0=\", false, function () {\n    return [useQuery];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"teams\",\n    className: \"component\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      children: AsideItems()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"contents\",\n      children: MainContents()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(Teams, \"Nr7UsCh8nr7DFTLB9YxMaOMjcug=\", false, function () {\n  return [useMutation, useMutation];\n});\n\n_c = Teams;\nexport default Teams;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teams\");","map":{"version":3,"sources":["C:/Users/boomers/조수아/graphQL/yalco-inflearn-graphql-apollo/4-1-react-before-apollo/src/components/teams.js"],"names":["useState","useQuery","useMutation","gql","GET_TEAMS","GET_TEAM","DELETE_TEAM","refetchTeams","EDIT_TEAM","Teams","contentId","setContentId","inputs","setInputs","manager","office","extension_number","mascot","cleaning_duty","project","deleteTeam","onCompleted","deleteTeamCompleted","execDeleteTeam","window","confirm","variables","id","data","console","log","alert","execEditTeam","editTeam","input","editTeamCompleted","AsideItems","roleIcons","developer","designer","planner","loading","error","refetch","teams","map","members","first_name","last_name","role","MainContents","team","handleChange","e","name","value","target"],"mappings":"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","sourcesContent":["import \"./components.css\";\r\nimport { useState } from \"react\";\r\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\r\n\r\nconst GET_TEAMS = gql`\r\n  query GetTeams {\r\n    teams {\r\n      id\r\n      manager\r\n      members {\r\n        id\r\n        first_name\r\n        last_name\r\n        role\r\n      }\r\n    }\r\n  }\r\n`;\r\nconst GET_TEAM = gql`\r\n  query GetTeam($id: ID!) {\r\n    team(id: $id) {\r\n      id\r\n      manager\r\n      office\r\n      extension_number\r\n      mascot\r\n      cleaning_duty\r\n      project\r\n    }\r\n  }\r\n`;\r\n\r\nconst DELETE_TEAM = gql`\r\n  mutation DeleteTeam($id: ID!) {\r\n    deleteTeam(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\nlet refetchTeams;\r\n\r\n// ...\r\nconst EDIT_TEAM = gql`\r\n  mutation EditTeam($id: ID!, $input: PostTeamInput!) {\r\n    editTeam(id: $id, input: $input) {\r\n      id\r\n      manager\r\n      office\r\n      extension_number\r\n      mascot\r\n      cleaning_duty\r\n      project\r\n    }\r\n  }\r\n`;\r\n// ...\r\n\r\n//   ...\r\n\r\n//   ...\r\n\r\nfunction Teams() {\r\n  const [contentId, setContentId] = useState(0);\r\n  const [inputs, setInputs] = useState({\r\n    manager: \"\",\r\n    office: \"\",\r\n    extension_number: \"\",\r\n    mascot: \"\",\r\n    cleaning_duty: \"\",\r\n    project: \"\",\r\n  });\r\n\r\n  const [deleteTeam] = useMutation(DELETE_TEAM, {\r\n    onCompleted: deleteTeamCompleted,\r\n  });\r\n\r\n  function execDeleteTeam() {\r\n    if (window.confirm(\"이 항목을 삭제하시겠습니까?\")) {\r\n      deleteTeam({ variables: { id: contentId } });\r\n    }\r\n  }\r\n\r\n  function deleteTeamCompleted(data) {\r\n    console.log(data.deleteTeam);\r\n    alert(`${data.deleteTeam.id} 항목이 삭제되었습니다.`);\r\n    refetchTeams();\r\n    setContentId(0);\r\n  }\r\n\r\n  function execEditTeam() {\r\n    editTeam({\r\n      variables: {\r\n        id: contentId,\r\n        input: inputs,\r\n      },\r\n    });\r\n  }\r\n  const [editTeam] = useMutation(EDIT_TEAM, { onCompleted: editTeamCompleted });\r\n  function editTeamCompleted(data) {\r\n    console.log(data.editTeam);\r\n    alert(`${data.editTeam.id} 항목이 수정되었습니다.`);\r\n    refetchTeams();\r\n  }\r\n\r\n  function AsideItems() {\r\n    const roleIcons = {\r\n      developer: \"💻\",\r\n      designer: \"🎨\",\r\n      planner: \"📝\",\r\n    };\r\n\r\n    const { loading, error, data, refetch } = useQuery(GET_TEAMS);\r\n    refetchTeams = refetch;\r\n\r\n    if (loading) return <p className=\"loading\">Loading...</p>;\r\n    if (error) return <p className=\"error\">Error :(</p>;\r\n\r\n    return (\r\n      <ul>\r\n        {data.teams.map(({ id, manager, members }) => {\r\n          return (\r\n            <li key={id}>\r\n              <span\r\n                className=\"teamItemTitle\"\r\n                onClick={() => {\r\n                  setContentId(id);\r\n                }}\r\n              >\r\n                Team {id} : {manager}'s\r\n              </span>\r\n              <ul className=\"teamMembers\">\r\n                {members.map(({ id, first_name, last_name, role }) => {\r\n                  return (\r\n                    <li key={id}>\r\n                      {roleIcons[role]} {first_name} {last_name}\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  function MainContents() {\r\n    const { loading, error } = useQuery(GET_TEAM, {\r\n      variables: { id: contentId },\r\n      onCompleted: (data) => {\r\n        if (contentId === 0) {\r\n          setInputs({\r\n            manager: \"\",\r\n            office: \"\",\r\n            extension_number: \"\",\r\n            mascot: \"\",\r\n            cleaning_duty: \"\",\r\n            project: \"\",\r\n          });\r\n        } else {\r\n          setInputs({\r\n            manager: data.team.manager,\r\n            office: data.team.office,\r\n            extension_number: data.team.extension_number,\r\n            mascot: data.team.mascot,\r\n            cleaning_duty: data.team.cleaning_duty,\r\n            project: data.team.project,\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    if (loading) return <p className=\"loading\">Loading...</p>;\r\n    if (error) return <p className=\"error\">Error :(</p>;\r\n\r\n    function handleChange(e) {\r\n      const { name, value } = e.target;\r\n      setInputs({\r\n        ...inputs,\r\n        [name]: value,\r\n      });\r\n    }\r\n\r\n    return (\r\n      <div className=\"inputContainer\">\r\n        <table>\r\n          <tbody>\r\n            {contentId !== 0 && (\r\n              <tr>\r\n                <td>Id</td>\r\n                <td>{contentId}</td>\r\n              </tr>\r\n            )}\r\n            <tr>\r\n              <td>Manager</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"manager\"\r\n                  value={inputs.manager}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>Office</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"office\"\r\n                  value={inputs.office}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>Extension Number</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"extension_number\"\r\n                  value={inputs.extension_number}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>Mascot</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"mascot\"\r\n                  value={inputs.mascot}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>Cleaning Duty</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"cleaning_duty\"\r\n                  value={inputs.cleaning_duty}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>Project</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"project\"\r\n                  value={inputs.project}\r\n                  onChange={handleChange}\r\n                />\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        {contentId === 0 ? (\r\n          <div className=\"buttons\">\r\n            <button onClick={() => {}}>Submit</button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"buttons\">\r\n            <button onClick={execEditTeam}>Modify</button>\r\n            <button onClick={execDeleteTeam}>Delete</button>\r\n            <button\r\n              onClick={() => {\r\n                setContentId(0);\r\n              }}\r\n            >\r\n              New\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div id=\"teams\" className=\"component\">\r\n      <aside>{AsideItems()}</aside>\r\n      <section className=\"contents\">{MainContents()}</section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Teams;\r\n"]},"metadata":{},"sourceType":"module"}